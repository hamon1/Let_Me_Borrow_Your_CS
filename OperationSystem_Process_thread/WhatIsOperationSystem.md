Operation System
=======

운영체제
-----
---
프로그램 실행에 마땅히 필요한 요소들을 가리켜 시스템 자원, 혹은 줄여서 자원이라고 한다.

실행할 프로그램에 필요한 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램이 바로 운영체제다.
운영체제는 인터넷 브라우저, 게임과 같은 프로그램이다. 
**여느 프로그램과 마찬가지로 메모리에 적재되어야 한다.**
> 운영체제는 매우 특별한 프로그램이기 때문에 항상 컴퓨터가 부팅될 때 메모리 내 
> **커널영역(kernel space)**
> 이라는 공간에 따로 적제되어 실행된다.
> 
> _커널 영역을 제외한 나머지 영역, 즉 사용자가 이용하는 응용 프로그램이 적재되는 영역을_
> **사용자 영역(user space)**
> _이라고 한다._

운영체제는 실행할 프로그램을 메모리에 적재하고, 더 이상 실행되지 않는 프로그램을 메모리에서 삭제하여 지속적으로 메모리를 관리한다.

또한, 어떤 프로그램부터 CPU를 사용할지와 얼마나 오랫동안 CPU를 사용할지 결정하는 문제도 운영체제가 해결한다. 


<br>

#### [운영체제는 응용 프로그램에 자원을 효율적으로 배분하고, 실행할 프로그램들이 지켜야 할 규칙을 만들어 컴퓨터 시스템 전체를 관리한다.]

---
### 운영체제를 왜 알아야 할까?

만들어진 프로그램은 결국 하드웨어가 실행하고, 그 하드웨어를 조작하는 프로그램이 운영체제이다. 
따라서 운영체제는 현재 하드웨어의 상태는 어떠한지, 코드가 어떻게 실행되었는지, 하드웨어 상에 어떤 문제가 있었는지 등을 상세히 알려줄 수 있고, 이를 통해 
**문제 해결**
의 실마리를 찾을 수 있다.

---

## 커널
자원에 접근하고 조작하는 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능이 운영체제의 핵심 서비스에 속한다.

이러한 운영체제의 핵심 서비스를 담당하는 부분이 바로
**커널(kernel)**
이다.

> 운영체제가 제공하는 서비스 중 커널에 포함되지 않는 서비스도 있다. 
> **사용자 인터페이스(UI; User Interface)**
> 는 윈도우의 바탕화면과 같이 사용자가 컴퓨터와 상호작용할 수 있는 통로이다.
> 
> - 사용자 인터페이스(UI; User Interface)
>   - 그래픽 유저 인터페이스(GUI; Graphical User Interface)
>   - 커맨드 라인 인터페이스(CLI; Command Line Interface)

<br>

### 이중 모드와 시스템 호출
운영체제는 응용 프로그램들이 자원에 접근하려고 할 때 오직 자신을 통해서만 접근하도록하여 자원을 보호한다.

이러한 운영체제의 문지기 역할은 이중 모드로써 구현된다. 
**이중 모드(dual mode)**
란 CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식이다. 

_CPU는 명령어를 사용자 모드로써 실행할 수 있고, 커널 모드로써 실행할 수 있다._

- 이중 모드(dual mode)
  - 사용자 모드(user mode)
  - 커널 모드(kernel mode)

#### 사용자 모드
운영체제 서비스를 제공받을 수 없는 실행 모드이다.
즉, 커널 영역의 코드를 실행할 수 없는 모드이다.

_(일반적인 응용 프로그램)_

#### 커널 모드
운영체제 서비스를 제공받을 수 있는 실행 모드이다.
즉, 커널 영역의 코드를 비롯한 모든 명령어를 실행할 수 있는 모드이다.

_(운영체제)_

<br><br>

사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으려면 운영체제에 요청을 보내 커널 모드로 전환되어야 한다.
이러한 요청을 
**시스템 호출(system call)**
이라고 한다.

시스템 호출은 소프트웨어적인 인터럽트이다.

**소프트웨어 인터럽트**
는 입출력장치 외에 특정 명령어에 의해 발생되는 인터럽트다.

1. 응용 프로그램의 시스템 호출 (운영체제(커널 모드))
2. 운영체제 코드 실행 (하드 디스크 접근)
3. 시스템 호출 복귀 (사용자 모드)

---
## 운영체제의 핵심 서비스

### 프로세스(process) 관리
실행 중인 프로그램을 프로세스라고 한다. 

일반적으로 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있기에 CPU는 이 프로세스들을 조금씩 번갈아 가며 실행한다. 

### 자원 접근 및 할당

**CPU 스케줄링**
: 프로세스들에 공정하게 CPU를 할당하기 위해 어떤 프로세스부터 CPU를 이용하게 할 것인지, 얼마나 오래 사용하게 할지를 결정하는 것을 말한다.

<br>

**메모리**
: 새로운 프로세스가 적재될 때마다 어느 주ㅗ에 적재해야 할지를 결정한다.

<br>

**입출력장치**
: 입출력장치가 CPU에 하드웨어 인터럽트 요청 신호를 보내면 CPU는 하던 일을 잠시 백업한 뒤 커널 영역에 있는 인터럽트 서비스 루틴을 실행한다.

### 파일 시스템 관리
파일 시스템(file system)도 운영체제가 지원하는 핵심 서비스다.

<br><br>

###### _참고 도서: 혼자 공부하는 컴퓨터구조 + 운영체제 (한빛미디어 _ 강민철 지음)_